
2000 June 11

Sky maps for observing sites in the Southern Hemisphere were
drawn mirror-imaged except when "Invert North and South" was
checked due to bug in setting the "mirror" flag in Sky.c.
Fixed.

Added a legend to the planetary position table generate by planetp.c
which explains that astronomers measure azimuth from the South.  Even
though this is explained in the help file, several people were
confused about this matter.

Recompiled everything on Moby with
    CFLAGS = -fast -xO4 -xtarget=native -DSolaris
to allow code generation which counts on the UltraSPARC
architecture.

2003 April 7

Changed delimiters in the UTC date field to "-" for ISO-8601
compliance.

Loosened up checking for delimiters when parsing the UTC
field to accept any delimiter between date and time fields.
A space is still required between the date and time.

Loosened up parsing of latitude and longitude for the observing
site to accept a space as a delimiter between degrees and
minutes.

2003 April 21

The code which enforces the CPU time limit (to bail us out of
loops caused by bad handling of malformed requests) fell afoul
of the Protean signal handling in Solaris.  I changed the "signal"
call to "sigset" and it seems to work now.  I also changed the
time limit exceeded message to display in a red font.

Added a "-" option specification which marks the end of the
list of options identified by a leading "-" and changed the
order of arguments supplied by the cgi-bin/Yoursky script to
move the observing site longitude and latitude to the end and
precede them with a "-" to prevent any attempt to use them to
spoof other option specifications.

Changed the "install" target to "mv" the executable into the
new /vitesse/server/cgi-executables directory.  The icons are
no longer installed automatically by "make install".

If CACHE_WARNING is defined, a big HTML comment screed is now
included before the "<img src="> tag which includes the cached
image in the HTML result document warning users who look at the
source to figure out where the image is coming from not to link
to it in the cache directory.

2005 April 20

Fixed an off by 12 hours in the "-e2" option converting
a specified Julian day to civil date.

Cleaned up some nested comments about which GCC quibbled.

Added a definition of __USE_XOPEN_EXTENDED before the
include of <signal.h> so that sigset() will be defined,
eliminating a warning message.

2005 July 3

Fixed a potential buffer overflow in importing orbital elements
passed into an image generation by a di= argument.

2006 January 8

It was possible to hang yoursky by specifying a UTC or Julian date
extremely far in the future, which caused the call on kepler in sunpos
to loop.  As this call is done at the end of option processing, before
time limit enforcement began, this would permanently generate a CPU
loop on the server.  I moved the time limit enforcement to start at
the very top of main() in vplanet.c, even before option processing
begins to prevent such disasters in the future, and restored the
future date sanity checks for UTC and Julian "-e" option epoch
specifications which were removed in a fit of idealism some time ago. 
Any specification of a date greater than 8000-01-01 will now be reset
to an epoch of "Now".

2007 December 3

Removed the "install" targets from sky/Makefile and
telescope/Makefile.  These were made obsolete by the master
Makefile in the parent directory and installed the programs
in an obsolete location.

Wrapped checkbox and radio controls in the form generated
by sky/vplanet.c and telescope/vplanet.c with XHTML
<label> ... </label> containers, which permit clicking
the legend to activate the control.  There are only a few
of these (principally the North/South and East/East buttons
in the location/aim point selection), as most of the other
other control labels are already links to the help file.

Wrapped the abbreviations "AU" and "ER" in the ephemeris tables
generated by astro/planetp.c functions updatePlanet and
updatePlanetComplete with XHTML <span> tags with a
"title" attribute which defines the term.  This title will
be displayed by most browsers when the user moves the mouse
over the abbreviation.

The embedded <img> tag in the XHTML generated by
telescope/vplanet.c failed with the most recent W3C
Validator because there was no space between the closing
quote of the 'border="0"' and the start of the "alt="
attributes.  I added the space and confirmed that the
XHTML now validates.  The Sky map did not have this problem.

Modified the ephemeris tables generated by updatePlanet and
updatePlanetComplete in astro/planetp.c so that negative
numbers (which can occur in the Declination, Altitude, and
Azimuth fields) are emitted with the XHTML "&minus;" entity
rather than an ASCII hyphen.
